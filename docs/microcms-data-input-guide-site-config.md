# microCMS データ入力ガイド - サイト設定

このガイドでは、microCMS管理画面でサイト設定データを入力する手順を説明します。

## 前提条件

- ✅ `site-config` APIが作成済みであること
- ✅ APIスキーマが正しく設定されていること
- ⚠️ **オブジェクト形式**のため、コンテンツは **1つだけ** 作成します

---

## データ入力手順

### 1. APIを開く

1. microCMS管理画面で「サイト設定」を開く
2. 「コンテンツを追加」（または「編集」）をクリック

⚠️ **重要**: オブジェクト形式のため、既にコンテンツがある場合は「編集」、ない場合は「追加」になります。

---

### 2. 各フィールドに入力

| フィールド | 入力内容 |
|-----------|---------|
| **サイト名** | `一般社団法人AIビューティーサロン推進協会` |
| **サイト説明** | `AIビューティーサロン推進協会は、AI技術を活用して美容サロンの経営効率化、顧客満足度の向上、そして新たな価値創造を支援します。` |
| **サイトURL** | `https://your-domain.com` ← **本番URLに変更** |
| **OGP画像** | 既存の画像をアップロード、または空欄 |
| **ロゴ画像** | 空欄でOK（将来の拡張用） |
| **キャッチコピー** | `AIの力で、美容業界の未来を共創する。` |
| **連絡先メールアドレス** | `info@example.com` ← **実際のアドレスに変更** |
| **電話番号** | `03-6709-2308` |
| **郵便番号** | `170-0013` |
| **住所** | `東京都豊島区東池袋1-32-2 小泉ビル4F` |
| **Google Analytics ID** | 空欄でOK（GA4測定IDがあれば入力） |

---

### 3. 画像のアップロード（オプション）

#### OGP画像のアップロード

1. 「OGP画像」フィールドの「ファイルを選択」をクリック
2. 既存の `/public/images/og-image.png` をアップロード
   - 推奨サイズ: 1200x630px
   - 形式: PNG, JPEG
3. または、新しい画像をアップロード

⚠️ **注意**: 画像をアップロードしない場合は、デフォルトの `/images/og-image.png` が使用されます。

---

### 4. 保存

1. すべてのフィールドに入力したら「保存」をクリック
2. 「公開」をクリック（オブジェクト形式は自動的に公開状態）

---

## 入力完了後の確認

### microCMS管理画面で確認

1. 「サイト設定」を開く
2. 入力した内容が正しく表示されていること
3. 「公開」状態になっていること

### サイトで確認

1. `.env.local` を開く
2. 以下の行を編集：
   ```bash
   NEXT_PUBLIC_USE_MICROCMS=true
   ```
3. 開発サーバーを再起動：
   ```bash
   # Ctrl+C で停止
   npm run dev
   ```
4. ブラウザで確認：

#### 確認項目

- **ブラウザのタブ**: サイト名が表示される
- **ページのソース（右クリック→ソースを表示）**:
  - `<title>` タグにサイト名が表示される
  - `<meta name="description">` にサイト説明が表示される
  - `<meta property="og:image">` にOGP画像URLが表示される
- **フッター**:
  - サイト名が表示される
  - キャッチコピーが表示される
  - 住所が表示される（〒郵便番号）

---

## トラブルシューティング

### データが表示されない

**原因1**: 環境変数が反映されていない
- 解決策: 開発サーバーを再起動

**原因2**: microCMSでデータが保存されていない
- 解決策: 「保存」→「公開」を再度実行

**原因3**: APIエンドポイント名が違う
- 解決策: エンドポイントが `site-config` になっているか確認

### OGP画像が表示されない

**原因1**: 画像のサイズが大きすぎる
- 解決策: 画像を圧縮してから再アップロード

**原因2**: 画像をアップロードしていない
- 解決策: デフォルトの `/images/og-image.png` が使用されます（問題なし）

### 住所の改行が正しく表示されない

- microCMSの「住所」フィールドで改行を入力した場合、そのまま表示されます
- 1行で入力した場合も問題なく表示されます

### 「コンテンツを追加」ボタンが表示されない

- オブジェクト形式は1つのコンテンツのみ
- 既にコンテンツがある場合は「編集」ボタンが表示されます

---

## 補足情報

### オブジェクト形式とは

- コンテンツが **1つだけ** 作成できるAPI形式
- サイト設定のような「唯一の設定」に適している
- 複数のコンテンツを作成したい場合は「リスト形式」を使用

### 変更可能な項目

管理者は以下の項目をいつでもmicroCMS管理画面から変更できます：

✅ サイト名  
✅ サイト説明（メタディスクリプション）  
✅ キャッチコピー  
✅ 連絡先メールアドレス  
✅ 電話番号  
✅ 住所  
✅ OGP画像  
✅ Google Analytics ID  

変更後、サイトは **自動的に反映** されます（ISRにより最大10分）。

---

**作成日**: 2025年10月1日  
**対象**: Phase 3 - サイト基本情報移行  
**API形式**: オブジェクト

